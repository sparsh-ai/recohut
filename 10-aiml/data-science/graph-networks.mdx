# Graph Networks

## Item-Item Co-Occurrence Graph

The item-item co-occurrence graph can be defined as an undirected graph $\mathcal{G = \{V, E\}}$, where $\mathcal{V}$ is the node set and $\mathcal{E}$ is the edge set. Each node in $ğ‘£ \in \mathcal{V}$ denotes an item. For user $ğ‘¢ \in \mathcal{U}$, if two items $ğ‘£_0$ and $ğ‘£_1$ co-occur in his historical behavior sequence $\mathcal{B_ğ‘¢}$, then the triplet $(ğ‘£_0, ğ‘£_1, ğ‘¤) \in \mathcal{E}$. $ğ‘¤$ denotes the co-occurrence times. 

In practice, to construct an item-item co-occurrence graph, we set a sliding window and slide it on behavior sequences of all users. Each pair of items within the window are connected by an undirected edge. The weight of each edge is assigned as the total number of occurrences of the two connected items in all usersâ€™ behaviors.

## Triangles

Triangle is an important structure in complex graph analysis in different fields, such as social networks and protein networks. Many existing works in graph theory have mentioned the properties of triangles. For instance, the homophily of triangles indicates the nodes in a triangle are often relatively similar. Triangles are also used to address some of the biases in existing CTR models.

![](/img/docs/graphs-triangles-100222.png)

Standard CTR methods are biased towards the similar and popular items in the left figure. Triangle-based methods introduces different triangles as diverse interest units, such as skirts of the same color, store and use in the right figure. [source](https://arxiv.org/pdf/2202.02698v1.pdf).

In an item-item co-occurrence graph $\mathcal{G = \{V, E\}}$, for node $ğ‘£ \in \mathcal{V}$, we denote the set of its $K$-order ($K$>0) neighbor nodes as $\mathcal{V}_ğ‘£$. For three nodes $ğ‘£_0, ğ‘£_1,\ \text{and}\ ğ‘£_2 \in \mathcal{V}_ğ‘£$, we define the triplet $ğ‘¡_ğ‘Ÿ = (ğ‘£_0, ğ‘£_1, ğ‘£_2)$ as a triangle only if $(ğ‘£_0, ğ‘£_1), (ğ‘£_0, ğ‘£_2), and (ğ‘£_1, ğ‘£_2) \in \mathcal{E}$.

The number of triangles can increase exponentially with the number of nodes. Thus, to effectively incorporate triangle structure information, we set $ğ¾$ as a relative small number. Moreover, for a target node, since the influence of triangles of different distances is also distinct, we further introduce the definition of k-order triangles. k-Order Triangle: For node $ğ‘£ \in \mathcal{V}$, given a triangle $(ğ‘£_0, ğ‘£_1, ğ‘£_2)$, if the shortest distance from these three nodes to ğ‘£ is ğ‘˜, then we define this triplet as a k-order triangle of ğ‘£. Generally speaking, the triangle order ğ‘˜ is a natural number, which is smaller than the order of the neighborhood $ğ¾$.